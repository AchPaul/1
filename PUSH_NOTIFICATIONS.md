# GrowHub PWA Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π GrowHub –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö —Ç–µ–ø–ª–∏—Ü—ã –ø—Ä—è–º–æ –Ω–∞ –≤–∞—à–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä—ã –∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±—Ä–∞—É–∑–µ—Ä–æ–≤

| –ë—Ä–∞—É–∑–µ—Ä | Web Push | –õ–æ–∫–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è |
|---------|----------|----------------------|------------|
| Chrome (Desktop) | ‚úÖ | ‚úÖ | –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |
| Chrome (Android) | ‚úÖ | ‚úÖ | –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |
| Firefox | ‚úÖ | ‚úÖ | –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |
| Edge | ‚úÖ | ‚úÖ | –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ |
| Safari 16.4+ | ‚úÖ | ‚úÖ | –¢—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ PWA –Ω–∞ iOS |
| Safari < 16.4 | ‚ùå | ‚ö†Ô∏è | –¢–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ PWA |
| iOS Safari (Web) | ‚ùå | ‚ùå | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–∞–∫ PWA |

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **–°–µ—Ä–≤–∏—Å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Üí **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** –∏–ª–∏ –Ω–∞–ø—Ä—è–º—É—é –Ω–∞ `/notifications.html`.

### 2. –í–∫–ª—é—á–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üîî –í–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" –∏ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ç–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
–í—ã–±–µ—Ä–∏—Ç–µ, –æ –∫–∞–∫–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∞—Ç—å –æ–ø–æ–≤–µ—â–µ–Ω–∏—è:
- üíß –ë–∞–∫ –¥–ª—è –≤–æ–¥—ã –ø—É—Å—Ç
- üí® –£–≤–ª–∞–∂–Ω–∏—Ç–µ–ª—å –ø—É—Å—Ç
- üå°Ô∏è –í—ã—Å–æ–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
- ‚ùÑÔ∏è –ù–∏–∑–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞
- ‚ö†Ô∏è –û—à–∏–±–∫–∏ –¥–∞—Ç—á–∏–∫–æ–≤
- ‚ö° –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ iOS

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ iPhone/iPad —Å iOS 16.4+:

1. –û—Ç–∫—Ä–æ–π—Ç–µ GrowHub –≤ Safari
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **–ü–æ–¥–µ–ª–∏—Ç—å—Å—è** (üì§)
3. –í—ã–±–µ—Ä–∏—Ç–µ **"–ù–∞ —ç–∫—Ä–∞–Ω –î–æ–º–æ–π"**
4. –ù–∞–∂–º–∏—Ç–µ **"–î–æ–±–∞–≤–∏—Ç—å"**
5. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
6. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –≤–∫–ª—é—á–∏—Ç–µ –∏—Ö

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è VAPID –∫–ª—é—á–µ–π

–î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ push-—Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å VAPID –∫–ª—é—á–∏:

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ web-push CLI
npm install -g web-push

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π
web-push generate-vapid-keys
```

–ó–∞–º–µ–Ω–∏—Ç–µ `VAPID_PUBLIC_KEY` –≤ —Ñ–∞–π–ª–µ `push-notifications.js` –Ω–∞ –≤–∞—à –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   ESP32         ‚îÇ     ‚îÇ   MQTT Broker   ‚îÇ     ‚îÇ   PWA Client    ‚îÇ
‚îÇ   (GrowHub)     ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   (WebSocket)   ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   (Browser)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                        ‚îÇ
                                                        ‚ñº
                                                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                ‚îÇ Service Worker  ‚îÇ
                                                ‚îÇ + Push API      ‚îÇ
                                                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                        ‚îÇ
                                                        ‚ñº
                                                ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                                ‚îÇ Push Service    ‚îÇ
                                                ‚îÇ (Google/Apple)  ‚îÇ
                                                ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –§–∞–π–ª—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `push-notifications.js` | –ú–æ–¥—É–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ |
| `service-worker.js` | –û–±—Ä–∞–±–æ—Ç–∫–∞ push-—Å–æ–±—ã—Ç–∏–π –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `notifications.html` | UI –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π |
| `app.js` | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MQTT –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ |

## API

### PushNotificationManager

```javascript
// –ü–æ–ª—É—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞
const pm = window.pushManager;

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
const caps = pm.getCapabilities();
console.log(caps.supported);      // true/false
console.log(caps.permission);     // 'default'/'granted'/'denied'
console.log(caps.isSubscribed);   // true/false

// –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
await pm.subscribe();

// –û—Ç–ø–∏—Å–∫–∞
await pm.unsubscribe();

// –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
await pm.showLocalNotification('–ó–∞–≥–æ–ª–æ–≤–æ–∫', {
  body: '–¢–µ–∫—Å—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è',
  tag: 'my-notification',
  data: { url: '/state.html' }
});

// –ü–æ–∫–∞–∑–∞—Ç—å –∞–ª–µ—Ä—Ç GrowHub
await pm.showGrowHubAlert('alert_water', { temp: 25 });

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∏–ø–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
pm.setAlertPreferences({
  alert_water: true,
  alert_humid: false,
  // ...
});

// –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
const prefs = pm.getAlertPreferences();

// –ö–æ–ª–±—ç–∫–∏
pm.on('onPermissionChange', (permission) => { ... });
pm.on('onSubscriptionChange', (subscription) => { ... });
pm.on('onNotification', (data) => { ... });
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
Push API —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ HTTPS. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `localhost`.

### VAPID –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
Web Push –∏—Å–ø–æ–ª—å–∑—É–µ—Ç VAPID (Voluntary Application Server Identification) –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ push-–∑–∞–ø—Ä–æ—Å–æ–≤.

### –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
–ü–æ–¥–ø–∏—Å–∫–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `localStorage` –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ ESP32 —á–µ—Ä–µ–∑ MQTT —Ç–æ–ø–∏–∫ `set/push_subscription`.

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –±—Ä–∞—É–∑–µ—Ä–∞**
   - –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∑–Ω–∞—á–æ–∫ üîí –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
   - –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ "–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" —Ä–∞–∑—Ä–µ—à–µ–Ω—ã

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã**
   - Windows: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –°–∏—Å—Ç–µ–º–∞ ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - macOS: –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - Android: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí Chrome ‚Üí –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∂–∏–º "–ù–µ –±–µ—Å–ø–æ–∫–æ–∏—Ç—å"**
   - –û—Ç–∫–ª—é—á–∏—Ç–µ Focus Mode / DND –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

### iOS: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ iOS –≤–µ—Ä—Å–∏–∏ 16.4 –∏–ª–∏ –≤—ã—à–µ
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
- –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞, –Ω–µ –∏–∑ Safari

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è

–ï—Å–ª–∏ –≤—ã —Ä–∞–Ω–µ–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ù–∞–π–¥–∏—Ç–µ GrowHub –≤ —Å–ø–∏—Å–∫–µ —Å–∞–π—Ç–æ–≤
3. –ò–∑–º–µ–Ω–∏—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –Ω–∞ "–†–∞–∑—Ä–µ—à–∏—Ç—å"
4. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É

## –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

| –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|-----|----------|-----------|
| `alert_water` | –ë–∞–∫ –¥–ª—è –≤–æ–¥—ã –ø—É—Å—Ç | –í—ã—Å–æ–∫–∏–π |
| `alert_humid` | –£–≤–ª–∞–∂–Ω–∏—Ç–µ–ª—å –ø—É—Å—Ç | –í—ã—Å–æ–∫–∏–π |
| `alert_high_temp` | –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã | –í—ã—Å–æ–∫–∏–π |
| `alert_low_temp` | –ù–∏–∑–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ | –í—ã—Å–æ–∫–∏–π |
| `err_sensor_temp` | –û—à–∏–±–∫–∞ –¥–∞—Ç—á–∏–∫–∞ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã | –°—Ä–µ–¥–Ω–∏–π |
| `err_sensor_hg` | –û—à–∏–±–∫–∞ –¥–∞—Ç—á–∏–∫–∞ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ –ø–æ—á–≤—ã | –°—Ä–µ–¥–Ω–∏–π |
| `err_sensor_hg2` | –û—à–∏–±–∫–∞ –Ω–∏–∂–Ω–µ–≥–æ –¥–∞—Ç—á–∏–∫–∞ –≤–ª–∞–∂–Ω–æ—Å—Ç–∏ | –°—Ä–µ–¥–Ω–∏–π |
| `err_sensor_dht` | –û—à–∏–±–∫–∞ –¥–∞—Ç—á–∏–∫–∞ DHT | –°—Ä–µ–¥–Ω–∏–π |
| `rebooted` | –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω–æ | –ù–∏–∑–∫–∏–π |

## –î–µ–π—Å—Ç–≤–∏—è –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö

–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å–æ–¥–µ—Ä–∂–∞—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∫–Ω–æ–ø–∫–∏:

- **üíß –ë–∞–∫ –¥–ª—è –≤–æ–¥—ã –ø—É—Å—Ç** ‚Üí –ö–Ω–æ–ø–∫–∞ "‚úì –ó–∞–ª–∏—Ç–æ"
- **üí® –£–≤–ª–∞–∂–Ω–∏—Ç–µ–ª—å –ø—É—Å—Ç** ‚Üí –ö–Ω–æ–ø–∫–∞ "‚úì –ó–∞–ª–∏—Ç–æ"

–ù–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç –∫–æ–º–∞–Ω–¥—É `refill` –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —á–µ—Ä–µ–∑ MQTT.

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **iOS Safari (–Ω–µ PWA)**: Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã
2. **Firefox Private Mode**: Push –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω
3. **–ß–∞—Å—Ç–æ—Ç–∞**: Rate limiting –±—Ä–∞—É–∑–µ—Ä–æ–º (–æ–±—ã—á–Ω–æ 1 push/—Å–µ–∫—É–Ω–¥—É)
4. **–†–∞–∑–º–µ—Ä payload**: –ú–∞–∫—Å–∏–º—É–º 4KB –¥–ª—è –¥–∞–Ω–Ω—ã—Ö push
5. **–°—Ä–æ–∫ –ø–æ–¥–ø–∏—Å–∫–∏**: –ú–æ–∂–µ—Ç –∏—Å—Ç–µ—á—å, —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–µ—Ä–µ–ø–æ–¥–ø–∏—Å–∫–∞
